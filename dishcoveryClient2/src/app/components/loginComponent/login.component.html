<div class="login-container">
    <mat-card class="login-card">
      <mat-card-header>
        <mat-card-title>
          <h1>Dishcovery</h1>
          <h2>Your Personal Smart Shopping List and Meal Assistant</h2>
        </mat-card-title>
      </mat-card-header>
      
      <mat-card-content>
        <form [formGroup]="mainForm" (submit)="processForm()">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Username</mat-label>
            <input matInput type="text" formControlName="username">
            <mat-icon matPrefix>person</mat-icon>
            @if(isCtrlInvalid('username') && mainForm.get('username')?.touched){
                <mat-error>
                    Please enter a valid username (min 5 letters)
                </mat-error>
            }
          
          </mat-form-field>
          
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password">
            <mat-icon matPrefix>lock</mat-icon>
            <button mat-icon-button matSuffix type="button" (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
              <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            @if(isCtrlInvalid('password') && mainForm.get('password')?.touched){
                <mat-error>
                    Please enter a valid password (min 5 letters)
                  </mat-error>
            }
          </mat-form-field>
          @if(checkErrorMessage()){
            <div class="error-message">
                <mat-error>
                  {{errorMessage}}
                </mat-error>
              </div>
          }
          
          <div class="button-row">
            <button mat-raised-button color="primary" type="submit" [disabled]="mainForm.invalid">Login</button>
          </div>
        </form>
      </mat-card-content>
      
      <mat-card-actions class="card-actions">
        <button mat-button [routerLink]="['/signUp']" color="accent">
          <mat-icon>person_add</mat-icon> No Account? Sign Up Here!
        </button>
        <button mat-button [routerLink]="['/forgotPassword']" color="accent">
          <mat-icon>help</mat-icon> Forgot Password? Click here
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
